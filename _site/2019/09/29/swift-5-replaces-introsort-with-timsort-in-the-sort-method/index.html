<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
    
    
    
    <title>Swift 5 replaces IntroSort with TimSort in the &#39;sort()&#39; method</title>
    <meta name="description" content="When we hear the term ‘Sorting,’ the algorithms which come to our mind are quicksort, insertion sort, merge sort, bubble sort, heap sort, and other sorting algorithms. We would have used the method sort() to sort elements in an array, in our day to day programming tasks. However, have you ever wondered what algorithm does the method uses to sort the items in Swift? Before Swift 5, it was ‘Introsort,’ but after Swift 5, it is ‘Timsort.’ Timsort is a sorting algorithm, used in programming languages like Python, and Java. I am going to cover mostly about ‘Timsort’ in this article.">
    
  
    <link rel="stylesheet" href="/blog/assets/main.css">
    <link rel="canonical" href="http://localhost:4000/blog/2019/09/29/swift-5-replaces-introsort-with-timsort-in-the-sort-method/">
    
    
    <link rel="alternate" type="application/rss+xml" title="Oh my Swift" href="http://localhost:4000/blog/feed.xml">
  
    
  
    
    <meta property="og:title" content="Swift 5 replaces IntroSort with TimSort in the &#39;sort()&#39; method">
    <meta property="og:site_name" content="Oh my Swift">
    <meta property="og:url" content="http://localhost:4000/blog/2019/09/29/swift-5-replaces-introsort-with-timsort-in-the-sort-method/">
    <meta property="og:description" content="When we hear the term ‘Sorting,’ the algorithms which come to our mind are quicksort, insertion sort, merge sort, bubble sort, heap sort, and other sorting algorithms. We would have used the method sort() to sort elements in an array, in our day to day programming tasks. However, have you ever wondered what algorithm does the method uses to sort the items in Swift? Before Swift 5, it was ‘Introsort,’ but after Swift 5, it is ‘Timsort.’ Timsort is a sorting algorithm, used in programming languages like Python, and Java. I am going to cover mostly about ‘Timsort’ in this article.">
    
    
    
    
    <!-- <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="rizwanasifahmed">
    <meta name="twitter:title" content="Swift 5 replaces IntroSort with TimSort in the &#39;sort()&#39; method">
    <meta name="twitter:description" content="When we hear the term ‘Sorting,’ the algorithms which come to our mind are quicksort, insertion sort, merge sort, bubble sort, heap sort, and other sorting algorithms. We would have used the method...">
    
      <meta name="twitter:creator" content="rizwanasifahmed">
     -->

    <!--  -->
  
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700&display=swap" rel="stylesheet">

    
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-144905716-1', 'auto');
    ga('send', 'pageview');

  </script>


    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Swift 5 replaces IntroSort with TimSort in the ‘sort()’ method | Oh my Swift</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Swift 5 replaces IntroSort with TimSort in the ‘sort()’ method" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="When we hear the term ‘Sorting,’ the algorithms which come to our mind are quicksort, insertion sort, merge sort, bubble sort, heap sort, and other sorting algorithms. We would have used the method sort() to sort elements in an array, in our day to day programming tasks. However, have you ever wondered what algorithm does the method uses to sort the items in Swift? Before Swift 5, it was ‘Introsort,’ but after Swift 5, it is ‘Timsort.’ Timsort is a sorting algorithm, used in programming languages like Python, and Java. I am going to cover mostly about ‘Timsort’ in this article." />
<meta property="og:description" content="When we hear the term ‘Sorting,’ the algorithms which come to our mind are quicksort, insertion sort, merge sort, bubble sort, heap sort, and other sorting algorithms. We would have used the method sort() to sort elements in an array, in our day to day programming tasks. However, have you ever wondered what algorithm does the method uses to sort the items in Swift? Before Swift 5, it was ‘Introsort,’ but after Swift 5, it is ‘Timsort.’ Timsort is a sorting algorithm, used in programming languages like Python, and Java. I am going to cover mostly about ‘Timsort’ in this article." />
<link rel="canonical" href="http://localhost:4000/blog/2019/09/29/swift-5-replaces-introsort-with-timsort-in-the-sort-method/" />
<meta property="og:url" content="http://localhost:4000/blog/2019/09/29/swift-5-replaces-introsort-with-timsort-in-the-sort-method/" />
<meta property="og:site_name" content="Oh my Swift" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-09-29T11:04:00+05:30" />
<script type="application/ld+json">
{"url":"http://localhost:4000/blog/2019/09/29/swift-5-replaces-introsort-with-timsort-in-the-sort-method/","headline":"Swift 5 replaces IntroSort with TimSort in the ‘sort()’ method","dateModified":"2019-09-29T11:04:00+05:30","datePublished":"2019-09-29T11:04:00+05:30","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/2019/09/29/swift-5-replaces-introsort-with-timsort-in-the-sort-method/"},"description":"When we hear the term ‘Sorting,’ the algorithms which come to our mind are quicksort, insertion sort, merge sort, bubble sort, heap sort, and other sorting algorithms. We would have used the method sort() to sort elements in an array, in our day to day programming tasks. However, have you ever wondered what algorithm does the method uses to sort the items in Swift? Before Swift 5, it was ‘Introsort,’ but after Swift 5, it is ‘Timsort.’ Timsort is a sorting algorithm, used in programming languages like Python, and Java. I am going to cover mostly about ‘Timsort’ in this article.","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->



  <!-- Twitter cards -->
  <meta name="twitter:site"    content="@rizwanasifahmed">
  <meta name="twitter:creator" content="@">
  <meta name="twitter:title"   content="Swift 5 replaces IntroSort with TimSort in the 'sort()' method">
  
  
  <meta name="twitter:description" content="Ohmyswift.com focuses on delivering latest articles about Swift and iOS development.">
  
  
  
  <meta name="twitter:card"  content="summary">
  <meta name="twitter:image" content="http://localhost:4000">
  
  <!-- end of Twitter cards -->


</head>
  

  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/blog/">Oh my Swift</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/blog/archives/">Archives</a>
      
        
        <a class="page-link" href="https://github.com/rizwan95">GitHub</a>
      
        
        <a class="page-link" href="https://twitter.com/rizwanasifahmed">Twitter</a>
      
        
        <a class="page-link" href="https://www.reddit.com/r/ohmyswift/">Reddit</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    
      <h1 class="post-title" itemprop="name headline">Swift 5 replaces IntroSort with TimSort in the &#39;sort()&#39; method</h1>
    
    <p class="post-meta"><time datetime="2019-09-29T11:04:00+05:30" itemprop="datePublished">Sep 29, 2019</time> •
  
    
    
      
    
      
    
      
    
      
    
      
        <a href="/blog/categories/swift-timsort-algorithms-sort/">Swift, Timsort, Algorithms, sort</a>
      
    
      
    
      
    
  



</p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>When we hear the term ‘Sorting,’ the algorithms which come to our mind are quicksort, insertion sort, merge sort, bubble sort, heap sort, and other sorting algorithms. We would have used the method <code class="highlighter-rouge">sort()</code> to sort elements in an array, in our day to day programming tasks. However, have you ever wondered what algorithm does the method uses to sort the items in Swift? Before Swift 5, it was ‘Introsort,’ but after Swift 5, it is ‘Timsort.’ Timsort is a sorting algorithm, used in programming languages like Python, and Java. I am going to cover mostly about ‘Timsort’ in this article.</p>

<h2 id="what-is-timsort">What is ‘Timsort?’</h2>
<p>Timsort is a hybrid sorting algorithm similar to introsort. Hybrid sorting algorithms are the ones which combine two or more sorting techniques to achieve the required results. For example, introsort is a combination of insertion sort, quick sort, and heap sort whereas, Timsort is a beautiful combination of binary insertion sort and merge sort.</p>

<p><img src="/blog/assets/images/timsortcomparisionchart.png" alt="Timsort in Swift" /></p>

<h2 id="what-is-so-special-about-timsort">What is so special about Timsort?</h2>
<p>Timsort is a stable sorting algorithm, whereas Introsort is an unstable sorting algorithm. Stable sorting algorithms are those in which the repeated elements are maintained in the same order as given during the input.</p>

<p>Unstable sorting algorithms are those in which the order of the repeated elements are not maintained in the same order as given during the input.</p>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Sorting_stability_playing_cards.svg/440px-Sorting_stability_playing_cards.svg.png" alt="Stable and unstable sorting algorithms" /></p>

<p>Source - Wikipedia</p>

<h2 id="how-does-timsort-work">How does Timsort work?</h2>
<p>I had already mentioned that Timsort uses a combination of binary insertion sort and merge sort. Timsort divides the array of elements into smaller sections and sorts them using binary insertion sort and merges the sorted arrays using merge sort. Isn’t it cool? This technique is efficient when compared to introsort. Timsort has a worst case of O(n log n), and non-constant space complexity.</p>

<h2 id="how-does-timsort-use-insertion-sort">How does Timsort use insertion sort?</h2>
<p>Timsort scans the array at first and performs a progressive sorting and merging of sub-arrays(sub-partitions), instead of dividing the entire array at first and merging them at the end. These partitions are known as “runs.” Whenever a run is found, it is added to a stack containing all other previous runs.</p>

<p>My friend, Bruno Rocha tells that, Timsort takes advantage of the fact that in every array of elements, there are contiguous subsequences of already sorted elements. In such cases, Timsort keeps on advancing its pointer until the current sequence stops being an ascending or descending pattern to find its next run.</p>

<p><strong>Step 1</strong> - If the given sequence of elements is descending, we can quickly sort it in linear time by reversing the sequence.</p>

<p><strong>Step 2</strong> - Timsort defines that every run should have a power of two, ranging from 16 to 256 or anything close to that. If the current run size is found to be smaller than the minimum field size, the elements are sorted immediately using insertion sort.</p>

<h2 id="how-does-merge-work-in-timsort">How does merge work in Timsort?</h2>
<p>In general, Timsort’s merging procedure is similar to mergesort. The algorithm tries to collapse the top three runs into a single one by merging them.<br />
Timsort makes use of the fact that if a specific array keeps on winning the comparison, then it is likely that it will win every time. In such cases, instead of comparing, we can apply binary search to reduce the comparisons. This technique is called as galloping. Swift doesn’t use galloping, but it attempts to collapse runs based on the last four runs, instead of three.</p>

<h2 id="timsort-algorithm-benchmarks">Timsort algorithm benchmarks.</h2>

<p>During October 2018, Nate Cook submitted a PR for implementing Timsort in Swift. He stated,</p>

<p>“This switches the standard library’s sort algorithm from an in-place introsort to use a modified Timsort, a stable, adaptive sort that merges runs using a temporary buffer. This implementation performs straight merges instead of adopting Timsort’s galloping strategy.
In addition to maintaining the relative order of equal/non-comparable elements, this algorithm outperforms the introsort on data with any intrinsic structure, such as runs of ascending or descending elements or a significant number of equality collisions. Benchmarking script and results can be seen in this gist: <a href="https://gist.github.com/natecook1000/5161e10aeba09408c130284ea6ec4e11">https://gist.github.com/natecook1000/5161e10aeba09408c130284ea6ec4e11</a>”</p>

<p>The pull request went through many iterations, and finally, the Timsort pull request was merged in November 2018.</p>

<h2 id="my-thoughts-about-swift">My thoughts about Swift</h2>
<p>It is fantastic to see how Swift is evolving every moment. A lot has changed since Swift’s initial release, and it is still changing. This kind of rapid evolution wouldn’t have been possible without the contribution of our Swift community. 
 I realized that the more I learned, the more I understand that I know a very little. (Here is my <a href="https://twitter.com/rizwanasifahmed/status/1176908418256211969?s=20">tweet</a> about it.)</p>

<p>Enjoyed reading it? Feel free to share your comments below. Like this article? Share it with your friends!
 You can also follow me on twitter right here: <a href="https://twitter.com/rizwanasifahmed">https://twitter.com/rizwanasifahmed</a></p>

<h2 id="references">References:</h2>
<p>If you want to learn more about Introsort , read this fantastic <a href="https://medium.com/swift2go/timsort-and-introsort-swifts-sorting-algorithms-f4b85b8fcbe2">blog</a> written by my friend Bruno Rocha</p>

<p>Pull request Link: <a href="https://github.com/apple/swift/pull/19717">https://github.com/apple/swift/pull/19717</a></p>

<p>SwiftCI Benchmark results: <a href="https://github.com/apple/swift/pull/19717#issuecomment-427511589">https://github.com/apple/swift/pull/19717#issuecomment-427511589</a></p>

<p>Timsort: <a href="https://svn.python.org/projects/python/trunk/Objects/listsort.txt">https://svn.python.org/projects/python/trunk/Objects/listsort.txt</a></p>

  </div>

  

</article>


<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://ohmyswift.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            





      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy;  - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="http://localhost:4000/blog/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
